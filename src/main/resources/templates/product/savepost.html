<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="product/fragment :: head-meta">
  </head>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Clean Blog - Start Bootstrap Theme</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;600;800&family=Patrick+Hand&family=Quicksand:wght@300;400;500;600;700&family=Roboto:wght@100;300;400;500;700&display=swap" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/static/product/css/styles.css" rel="stylesheet" />
    <!--Boostrap Icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css" integrity="sha384-b6lVK+yci+bfDmaY1u0zE8YYJt0TZxLEAFyYSLHId4xoVvsrQu3INevFKo+Xir8e" crossorigin="anonymous" />
    <!-- Custome Css -->
    <link rel="stylesheet" href="/static/product/css/custom.css" />
    <link rel="stylesheet" href="/static/product/js/custom.js">
  </head>
  <body>
    <!-- Navigation-->
    <div th:replace="product/fragment :: nav"></div>
    <nav id="nav"></nav>
    <!-- Page Header-->
    <header id="image-header" class="masthead container hero-custom" th:style="'background-image: url(' + ${@environment.getProperty('SERVER_PATH')} + '/uploaded/' + ${updatepost.getImageurl()}  +')'">
      <div class="hero-custom-edit">
        <label for="imagefile">
          <i class="bi bi-pencil-square"></i>
        </label>
        <input id="imagefile"  type="file" style="display: none;">
      </div>
      <div class="container position-relative px-4 px-lg-5">
        <div class="row gx-4 gx-lg-5 justify-content-center">
          <div class="col-md-10 col-lg-8 col-xl-7">
            <div class="post-heading">
              <!-- <h1 id="titlechange" >Man must explore, and this is exploration at its greatest</h1> -->
              <h1 id="titlechange"></h1>
              <!-- <h2 class="subheading">Problems look mighty small from 150 miles up</h2> -->
              <!-- <span class="meta">
                Posted by
                <a href="#!">Start Bootstrap</a>
                on August 24, 2022
              </span> -->
            </div>
          </div>
        </div>
      </div>
    </header>
    <!-- Post Content-->
    <article class="mb-4">
      <div class="container article-wrapper-custom">
        <div class="row mb-4">
          <form action="" class="row g-3">
            <input class="col-10  changetileEvent" type="text" name="" id="title" placeholder="Title ..."  th:value="${updatepost.getTitle()}"/>
            <div class="col-2">
              <label for="category" class="fs-6 ms-2">Category</label>
              <div class="input-group">
                <select class="form-select" id="category" aria-label="Example select with button addon">
                  <option th:value="null" th:selected="${updatepost.getCategory() == null}">Choose...</option>
                  <option value="Technology" th:selected="${updatepost.getCategory() == 'Technology'}">Technology</option>
                  <option value="Education" th:selected="${updatepost.getCategory() == 'Education'}">Education</option>
                  <option value="Life" th:selected="${updatepost.getCategory() == 'Life'}">Life</option>
                  <option value="Other" th:selected="${updatepost.getCategory() == 'Other'}">Other</option>
                </select>
              </div>
            </div>
            <div class="col-12">
              <textarea class="col-12" id="editor"></textarea>
            </div>
            <button type="button" class="col-1 offset-md-12 mt-4 btn ms-1" id="submit" >Publish</button>
          </form>
        </div>
      </div>
    </article>

    <!-- Footer-->
    <div th:replace="product/fragment :: footer"></div>
    <div id="footer"></div>
    <!-- Modal-->
    <div th:replace="product/fragment :: nav-modal"></div>
    <div id="nav-modal"></div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="/static/product/js/custom.js" th:src="@{/product/js/custom.js}"></script>
    <script src="/static/product/js/ckeditor.js" th:src="@{/product/js/ckeditor.js}"></script>
<!--    <div th:utext="${updatepost.getContent()}" id="contentFromThymeleaf"></div>-->
    <script th:inline="javascript">
      let editor;
      ClassicEditor.create( document.querySelector( '#editor' ) )
          .then( newEditor => {
              editor = newEditor;
            const htmlContent = [[${updatepost.getContent()}]]
            editor.setData(htmlContent);
          } )
          .catch( error => {
              console.error( error );
          } );
          
      document.querySelector( '#submit' ).addEventListener( 'click', () => {
          handleUpdatePost([[${updatepost.getIdpost()}]]);
      });
      changeTitleCreatePost();
      previewImage("image-header","imagefile");
    </script>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
  </body>
</html>
